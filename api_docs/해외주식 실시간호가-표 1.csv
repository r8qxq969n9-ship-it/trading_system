해외주식 실시간호가,,,,,,
API 통신방식,WEBSOCKET,,,,,
메뉴 위치,[해외주식] 실시간시세,,,,,
API 명,해외주식 실시간호가,,,,,
API ID,실시간-021,,,,,
실전 TR_ID,HDFSASP0,,,,,
모의 TR_ID,모의투자 미지원,,,,,
기본정보,,,,,,
HTTP Method,POST,,,,,
실전 Domain,ws://ops.koreainvestment.com:21000,,,,,
모의 Domain,모의투자 미지원,,,,,
URL 명,/tryitout/HDFSASP0,,,,,
개요,,,,,,
개요,"해외주식 실시간호가 API를 이용하여 미국 실시간 10호가(매수/매도) 시세가 무료로 제공됩니다. (미국은 유료시세 제공 X)

아시아 국가의 경우, HTS(efriend Plus) [7781] 시세신청(실시간) 화면에서 유료 서비스 신청 시, 
""해외주식 실시간호가 HDFSASP0"" 을 이용하여 아시아국가 유료시세(실시간호가)를 받아보실 수 있습니다. (24.11.29 반영)
(아시아 국가 무료시세는 ""해외주식 지연호가(아시아) HDFSASP1"" 를 이용하시기 바랍니다.)

※ 미국 : 실시간 무료, 매수/매도 각 10호가 (0분지연, 나스닥 마켓센터에서 거래되는 호가 및 호가 잔량 정보)
※ 아시아(홍콩, 베트남, 중국, 일본) : 실시간 유료 (단, 중국은 HTS[7781]에서 실시간시세 무료로 신청 후 이용 가능)

해당 API로 미국주간거래(10:00~16:00) 시세 조회도 가능합니다.
※ 미국주간거래 실시간 조회 시, 맨 앞자리(R), tr_key 중 시장구분 값을 다음과 같이 입력 → 나스닥: BAQ, 뉴욕: BAY, 아멕스: BAA

[참고자료]

실시간시세(웹소켓) 파이썬 샘플코드는 한국투자증권 Github 참고 부탁드립니다.
https://github.com/koreainvestment/open-trading-api/blob/main/websocket/python/ws_domestic_overseas_all.py

실시간시세(웹소켓) API 사용방법에 대한 자세한 설명은 한국투자증권 Wikidocs 참고 부탁드립니다.
https://wikidocs.net/book/7847 (국내주식 업데이트 완료, 추후 해외주식·국내선물옵션 업데이트 예정)

",,,,,
Layout,,,,,,
구분,Element,한글명,Type,Required,Length,Description
Request Header,approval_key,웹소켓 접속키,string,Y,286,실시간 (웹소켓) 접속키 발급 API(/oauth2/Approval)를 사용하여 발급받은 웹소켓 접속키
,custtype,고객 타입,string,Y,1,B : 법인 / P : 개인
,tr_type,등록/해제,string,Y,1,"""1: 등록, 2:해제"""
,content-type,컨텐츠타입,string,Y,20,utf-8
Request Body,tr_id,거래ID,string,Y,7,HDFSASP0
,tr_key,R거래소명종목코드,string,Y,6,"<미국 야간거래 - 무료시세>
D+시장구분(3자리)+종목코드
예) DNASAAPL : D+NAS(나스닥)+AAPL(애플)
[시장구분]
NYS : 뉴욕, NAS : 나스닥, AMS : 아멕스

<미국 주간거래>
R+시장구분(3자리)+종목코드
예) RBAQAAPL : R+BAQ(나스닥)+AAPL(애플)
[시장구분]
BAY : 뉴욕(주간), BAQ : 나스닥(주간). BAA : 아멕스(주간)

<아시아국가 - 유료시세>
※ 유료시세 신청시에만 유료시세 수신가능
""포럼 > FAQ > 해외주식 유료시세 신청방법"" 참고
R+시장구분(3자리)+종목코드
예) RHKS00003 : R+HKS(홍콩)+00003(홍콩중화가스)
[시장구분]
TSE : 도쿄, HKS : 홍콩,
SHS : 상해, SZS : 심천
HSX : 호치민, HNX : 하노이"
Response Header,,,,,,
Response Body,RSYM,실시간종목코드,object,Y,16,"'각 항목사이에는 구분자로 ^ 사용,
모든 데이터타입은 String으로 변환되어 push 처리됨'"
,SYMB,종목코드,string,Y,16,  
,ZDIV,소숫점자리수,string,Y,1,  
,XYMD,현지일자,string,Y,8,  
,XHMS,현지시간,string,Y,6,  
,KYMD,한국일자,string,Y,8,  
,KHMS,한국시간,string,Y,6,  
,BVOL,매수총잔량,string,Y,10,  
,AVOL,매도총잔량,string,Y,10,  
,BDVL,매수총잔량대비,string,Y,10,  
,ADVL,매도총잔량대비,string,Y,10,  
,PBID1,매수호가1,string,Y,12,  
,PASK1,매도호가1,string,Y,12,  
,VBID1,매수잔량1,string,Y,10,  
,VASK1,매도잔량1,string,Y,10,  
,DBID1,매수잔량대비1,string,Y,10,  
,DASK1,매도잔량대비1,string,Y,10,  
,PBID2,매수호가2,string,Y,12,
,PASK2,매도호가2,string,Y,12,
,VBID2,매수잔량2,string,Y,10,
,VASK2,매도잔량2,string,Y,10,
,DBID2,매수잔량대비2,string,Y,10,
,DASK2,매도잔량대비2,string,Y,10,
,PBID3,매수호가3,string,Y,12,
,PASK3,매도호가3,string,Y,12,
,VBID3,매수잔량3,string,Y,10,
,VASK3,매도잔량3,string,Y,10,
,DBID3,매수잔량대비3,string,Y,10,
,DASK3,매도잔량대비3,string,Y,10,
,PBID3,매수호가3,string,Y,12,
,PASK3,매도호가3,string,Y,12,
,VBID3,매수잔량3,string,Y,10,
,VASK3,매도잔량3,string,Y,10,
,DBID3,매수잔량대비3,string,Y,10,
,DASK3,매도잔량대비3,string,Y,10,
,PBID4,매수호가4,string,Y,12,
,PASK4,매도호가4,string,Y,12,
,VBID4,매수잔량4,string,Y,10,
,VASK4,매도잔량4,string,Y,10,
,DBID4,매수잔량대비4,string,Y,10,
,DASK4,매도잔량대비4,string,Y,10,
,PBID5,매수호가5,string,Y,12,
,PASK5,매도호가5,string,Y,12,
,VBID5,매수잔량5,string,Y,10,
,VASK5,매도잔량5,string,Y,10,
,DBID5,매수잔량대비5,string,Y,10,
,DASK5,매도잔량대비5,string,Y,10,
,PBID6,매수호가6,string,Y,12,
,PASK6,매도호가6,string,Y,12,
,VBID6,매수잔량6,string,Y,10,
,VASK6,매도잔량6,string,Y,10,
,DBID6,매수잔량대비6,string,Y,10,
,DASK6,매도잔량대비6,string,Y,10,
,PBID7,매수호가7,string,Y,12,
,PASK7,매도호가7,string,Y,12,
,VBID7,매수잔량7,string,Y,10,
,VASK7,매도잔량7,string,Y,10,
,DBID7,매수잔량대비7,string,Y,10,
,DASK7,매도잔량대비7,string,Y,10,
,PBID8,매수호가8,string,Y,12,
,PASK8,매도호가8,string,Y,12,
,VBID8,매수잔량8,string,Y,10,
,VASK8,매도잔량8,string,Y,10,
,DBID8,매수잔량대비8,string,Y,10,
,DASK8,매도잔량대비8,string,Y,10,
,PBID9,매수호가9,string,Y,12,
,PASK9,매도호가9,string,Y,12,
,VBID9,매수잔량9,string,Y,10,
,VASK9,매도잔량9,string,Y,10,
,DBID9,매수잔량대비9,string,Y,10,
,DASK9,매도잔량대비9,string,Y,10,
,PBID10,매수호가10,string,Y,12,
,PASK10,매도호가10,string,Y,12,
,VBID10,매수잔량10,string,Y,10,
,VASK10,매도잔량10,string,Y,10,
,DBID10,매수잔량대비10,string,Y,10,
,DASK10,매도잔량대비10,string,Y,10,
Example,,,,,,
Request Example (Python),"{
    ""header"": {
        ""approval_key"": ""35xxxxxa-bxxa-4xxb-87xxx-f56xxxxxxxxxx"",
        ""custtype"": ""P"",
        ""tr_type"": ""1"",
        ""content-type"": ""utf-8""
    },
    ""body"": {
        ""input"": {
            ""tr_id"": ""HDFSASP0"",
            ""tr_key"": ""RBAQAAPL""
        }
    }
}",,,,,
Response Example,"# 연결 확인
{
    ""header"": {
        ""tr_id"": ""HDFSASP0"", 
        ""tr_key"": ""RBAQAAPL"", 
        ""encrypt"": ""N""
        }, 
    ""body"": {
        ""rt_cd"": ""0"", 
        ""msg_cd"": ""OPSP0000"",
        ""msg1"": ""SUBSCRIBE SUCCESS"", 
        ""output"": {
            ""iv"": ""0123456789abcdef"", 
            ""key"": ""abcdefghijklmnopabcdefghijklmnop""}
        }
}

# output
0|HDFSASP0|001|RBAQAAPL^AAPL^4^20240506^202223^20240507^092223^1482^381^0^-10^182.8500^182.8700^350^57^0^-10^182.8400^182.9000^1^10^0^0^182.8300^182.9100^6^54^0^0^182.7900^182.9500^54^5^0^0^182.7500^182.9600^309^3^0^0^182.7300^182.9700^20^81^0^0^182.7000^182.9800^124^3^0^0^182.6600^182.9900^397^1^0^0^182.6500^183.0000^20^69^0^0^182.6300^183.0100^201^98^0^0",,,,,